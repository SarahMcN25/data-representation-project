<html>
	<head>
		<title>View Arrivals</title>

		<!-- Ajax -->
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>

		<!-- Bootstrap -->
		<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi" crossorigin="anonymous">

		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">

		<!-- JavaScript Bundle with Popper -->
		<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4" crossorigin="anonymous"></script>
		
	</head>
	<body>
        <!-- Pic -->
		<div align="center">
			<img src="snnairport.jpeg" alt="Shannon Airport Logo" width="450" height="250">
		</div>
        
		<div class="card">
			<div class="card-header">
				<h3>Arrivals at Shannon Airport</h3>
			</div>

			<div class="card-body">
				<div class="container" style="width:60%;">
				  <table id="example" border="2" class="table table-hover">
					  <thead>
						  <tr>
							  
							<th scope="col">Airline</th>
							<th scope="col">Destination</th>
							<th scope="col">Flight Number</th>
							<th scope="col">ID</th>
							<th scope="col">Origin</th>
							  
						  </tr>
					  </thead>
				  </table>
				</div>
			
			</div>

		</div>
		
	</body>
	<script>
		// CREATE ARRIVAL
		function createArrival(arrival){
			//console.log(JSON.stringify(arrival));
			$.ajax({
				"url": "http://sarahmcn25.pythonanywhere.com/arrivals",
				"method":"POST",
				"data":JSON.stringify(arrival),
				"dataType": "JSON",
				contentType: "application/json; charset=utf-8",
				"success":function(result){
					//console.log(result);
					callback(result)
				},
				"error":function(xhr,status,error){
					console.log("error: "+status+" msg:"+error);
				}
			});
		}

		
			
			
		// UPDATE ARRIVAL
		function updateArrival(arrival, callback){
			//console.log(JSON.stringify(book));
			$.ajax({
				"url": "http://sarahmcn25.pythonanywhere.com/arrivals",
				"method":"PUT",
				"data":JSON.stringify(arrival),
				"dataType": "JSON",
				contentType: "application/json; charset=utf-8",
				"success":function(result){
					//console.log(result);
					callback(result)
				
				},
				"error":function(xhr,status,error){
					console.log("error: "+status+" msg:"+error);
				}
			});
		}

				
			
		// DELETE ARRIVAL
		function deleteArrival(arrival, callback){
			//console.log(JSON.stringify(book));
			$.ajax({
				"url": "http://sarahmcn25.pythonanywhere.com/arrivals",
				"method":"DELETE",
				"data":"",
				"dataType": "JSON",
				contentType: "application/json; charset=utf-8",
				"success":function(result){
					//console.log(result);
					callback(result)

				},
				"error":function(xhr,status,error){
					console.log("error: "+status+" msg:"+error);
				}
			});
		}



				// GET ALL ARRIVALS
		function getAll(){
					$.ajax({
				"url": " http://sarahmcn25.pythonanywhere.com/arrivals ",
				"method":"GET",
				"data":"",
				"dataType": "JSON",
				"success":function(result){
					var arrivals = result;
					for (arrival in arrivals){
						arrival = arrivlas[arrivalnumber]
						console.log(arrival)
						arrName = arrival['Airline']
						addArrival(arrName)
						

			},
			"error":function(xhr,status,error){
				console.log("error: "+status+" msg:"+error);
			}
			});
		}
		
				// FIND ARRIVAL BY ID 
		function findById(arrival, callback){
			$.ajax({
				"url": "http://sarahmcn25.pythonanywhere.com/arrivals ",
				"method":"GET",
				"data":"",
				"dataType": "JSON",
				"success":function(result){
					//console.log(result);
					callback(result)

			},
			"error":function(xhr,status,error){
				console.log("error: "+status+" msg:"+error);
			}
			});
		}
			
			function processFindByIdResponse(result){
				console.log("in process")
				console.log(result)
			}
			
			// test
			findById(2, processFindByIdResponse)
			
			
			
			
			
			
	</script>