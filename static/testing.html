<html>
    <head>
        
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>
       
      <!-- CSS only -->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
		
	<!-- JavaScript Bundle with Popper -->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4" crossorigin="anonymous"></script>
	
    </head>
	
    <body>
        <!-- Pic -->
		<div align="center">
			<img src="snnairport.jpeg" alt="Shannon Airport Logo" width="450" height="250">
		</div>
        
		<div class="card">
			<div class="card-header">
				<h3>Arrivals at Shannon Airport</h3>
			</div>

			<div class="card-body">
				<div >
				  <table id="example" border="2" class="table table-hover">
				  
					  <thead>
							<tr>
								
								
								<th scope="col">ID</th>
								<th scope="col">Airline</th>
								<th scope="col">Origin</th>
								<th scope="col">Destination</th>
								<th scope="col">Flight Number</th>
							</tr>
					  
					  </thead>
					  <tbody id="myTable"></tbody>

				  </table>
				</div>
			
			</div>

		</div>


        <div id="arrivalList">
            
        </div>



		<script>
		
				var arrivalsArray = []
				
				buildTable(arrivalsArray)
			
				// GET ALL ARRIVALS
				
								$.ajax({
									"url":"/arrivals",
									"method":"GET",
									"data":"",
									"dataType":"JSON",
									"success":function(result){
										arrivalsArray = result
										buildTable(arrivalsArray)
										console.log(arrivalsArray)
										
									},
									"error":function(xhr,status,error){
										console.log("status:"+status+" message:"+error);
									}

								});
							
		
		// Code adapted from <https://www.youtube.com/watch?v=ru_YWeOh2kU>
			function buildTable(data){
				var table = document.getElementById("myTable")
				
				for (var i = 0; i < data.length; i++){
					var row = 	`
									<tr>\
										<td>${data[i].id}</td>\
										<td>${data[i].airline}</td>\
										<td>${data[i].origin}</td>\
										<td>${data[i].destination}</td>\
										<td>${data[i].flightnumber}</td>\
									</tr>\
								`;
								
					table.innerHTML += row 
				}
				
			}
		
		</script>
		
    </body>

</html>